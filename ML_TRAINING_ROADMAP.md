# ML Training Roadmap & Data Strategy

## ‚ö†Ô∏è CRITICAL WARNING: Overfitting Risk (Gemini AI Analysis)

### üî¥ –ü–†–û–ë–õ–ï–ú–ê: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (MVP):**
- 5m/15m —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã: –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ–¥–Ω–∏–π 1 –º–µ—Å—è—Ü –¥–∞–Ω–Ω—ã—Ö
- –¶–µ–ª—å: Sniper Entry ML –º–æ–¥–µ–ª—å –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö –≤—Ö–æ–¥–æ–≤

**–†–ò–°–ö:**
–ú–æ–¥–µ–ª—å –≤—ã—É—á–∏—Ç "—Ö–∞—Ä–∞–∫—Ç–µ—Ä" —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ –∏ –ø–æ—Ç–µ—Ä—è–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ–±–æ–±—â–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö market regimes.

**–ö–û–ù–ö–†–ï–¢–ù–´–ô –ü–†–ò–ú–ï–†:**
```
–ï—Å–ª–∏ –¥–µ–∫–∞–±—Ä—å 2024 –±—ã–ª –±—ã—á–∏–º (Bull Run):
‚îú‚îÄ ML –º–æ–¥–µ–ª—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–¥ –ª–æ–Ω–≥–∏
‚îú‚îÄ –û–Ω–∞ –†–ê–ó–£–ß–ò–¢–°–Ø —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Å–µ—Ç–∞–ø—ã –¥–ª—è —à–æ—Ä—Ç–æ–≤
‚îú‚îÄ –ü—Ä–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–µ —Ä—ã–Ω–∫–∞ –≤ —è–Ω–≤–∞—Ä–µ ‚Üí –ø—Ä–æ–≤–∞–ª –ø–æ –≤–∏–Ω—Ä–µ–π—Ç—É
‚îî‚îÄ Overfitting –Ω–∞ "–∑–µ–ª—ë–Ω—ã–µ —Å–≤–µ—á–∏" = –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞ –≤ –º–µ–¥–≤–µ–∂—å–µ–º —Ç—Ä–µ–Ω–¥–µ
```

---

## üìã ROADMAP: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞

### PHASE 1: MVP (–¢–µ–∫—É—â–∞—è —Å—Ç–∞–¥–∏—è) ‚úÖ
**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `candle_materializer.py`

**–î–∞–Ω–Ω—ã–µ:**
- 5m: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 –Ω–µ–¥–µ–ª–∏
- 15m: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 –Ω–µ–¥–µ–ª–∏  
- 1h/4h/1d/1w/1m: –ø–æ–ª–Ω—ã–µ 6 –º–µ—Å—è—Ü–µ–≤

**–û–±—ä—ë–º:** ~50,000 —Å–≤–µ—á–µ–π (–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è 6GB RAM)

**–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è:**
- ‚úÖ –ü–µ—Ä–≤–∏—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–π—Å–±–µ—Ä–≥–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ Proof of concept –¥–ª—è Sniper Entry

**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è:**
- ‚ùå –ü—Ä–æ–¥–∞–∫—à–Ω ML –º–æ–¥–µ–ª—å (—Ä–∏—Å–∫ overfitting)
- ‚ùå Backtesting –Ω–∞ —Ä–∞–∑–Ω—ã—Ö market regimes

---

### PHASE 2: Incremental Backfill (–ß–µ—Ä–µ–∑ 2-4 –Ω–µ–¥–µ–ª–∏ –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏)

**–¶–µ–ª—å:** –ù–∞–∫–æ–ø–∏—Ç—å –º–∏–Ω–∏–º—É–º **3-6 –º–µ—Å—è—Ü–µ–≤ –º–∏–Ω—É—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** —Å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ–º market regimes

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:**
```python
# –ó–∞–ø—É—Å–∫–∞—Ç—å –≤ CRON –∫–∞–∂–¥—É—é –Ω–æ—á—å –≤ 03:00 (–Ω–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)
# 1 –Ω–µ–¥–µ–ª—è –≤ –¥–µ–Ω—å = –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è 6GB RAM

materializer = CandleMaterializer(DB_DSN)

# –î–µ–Ω—å 1: –∑–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–¥–µ–ª—é –∏–∑ –∏—é–Ω—è 2024
await materializer.materialize_candles(
    symbol='BTCUSDT',
    start_time=datetime(2024, 6, 1),
    end_time=datetime(2024, 6, 8),
    timeframe_minutes=5,
    force_recompute=False  # –ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
)

# –î–µ–Ω—å 2: –∏—é–Ω—å 8-15
# –î–µ–Ω—å 3: –∏—é–Ω—å 15-22
# ...
# –ß–µ—Ä–µ–∑ ~20 –¥–Ω–µ–π = –ø–æ–ª–Ω—ã–π –∏—é–Ω—å
# –ß–µ—Ä–µ–∑ ~120 –¥–Ω–µ–π = –ø–æ–ª–Ω—ã–µ 6 –º–µ—Å—è—Ü–µ–≤
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–µ—Å—è—Ü–µ–≤ –¥–ª—è backfill:**
1. **Bull Run –º–µ—Å—è—Ü** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ—è–±—Ä—å 2024 - ATH Bitcoin)
2. **Bear –º–µ—Å—è—Ü** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤–≥—É—Å—Ç 2024 - –∫–æ—Ä—Ä–µ–∫—Ü–∏—è)
3. **Sideways –º–µ—Å—è—Ü** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ–Ω—Ç—è–±—Ä—å 2024 - –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è)

**WHY:** ML –º–æ–¥–µ–ª—å –î–û–õ–ñ–ù–ê –≤–∏–¥–µ—Ç—å –≤—Å–µ 3 —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞, –∏–Ω–∞—á–µ –æ–Ω–∞ —Å–ª–µ–ø–∞—è –≤ 2 –∏–∑ 3 —Å–∏—Ç—É–∞—Ü–∏–π.

---

### PHASE 3: Continuous Training Pipeline

**–ü–æ—Å–ª–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è 3+ –º–µ—Å—è—Ü–µ–≤ –¥–∞–Ω–Ω—ã—Ö:**

1. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ:**
   ```python
   # –ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 00:00
   python train_sniper_entry_model.py \
       --data_range "last_3_months" \
       --model xgboost \
       --features "ofi,obi,whale_cvd,gamma_exposure"
   ```

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫:**
   ```python
   # Track –ø–æ –º–µ—Å—è—Ü–∞–º –æ—Ç–¥–µ–ª—å–Ω–æ
   win_rate_by_month = {
       'Nov_2024': 0.58,  # Bull
       'Dec_2024': 0.62,  # Bull
       'Jan_2025': 0.51   # Bear - –ø—Ä–æ–≤–∞–ª? ‚Üí –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ Bear –¥–∞–Ω–Ω—ã—Ö
   }
   
   # ALARM: –µ—Å–ª–∏ win_rate –ø–∞–¥–∞–µ—Ç >10% –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞
   if abs(win_rate_by_month['Jan'] - win_rate_by_month['Dec']) > 0.10:
       print("‚ö†Ô∏è REGIME CHANGE DETECTED - Model needs retraining!")
   ```

3. **Sharpe Ratio –∫–∞–∫ –º–µ—Ç—Ä–∏–∫–∞ –æ–±–æ–±—â–µ–Ω–∏—è:**
   ```python
   # –¶–µ–ª—å: Sharpe > 1.5 —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö
   sharpe_ratio = (mean_return - risk_free_rate) / std_return
   
   # –ï—Å–ª–∏ Sharpe –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–º –º–µ—Å—è—Ü–µ ‚Üí overfitting
   ```

---

## üõ°Ô∏è RAM Management –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ backfill

**–ö–æ–≥–¥–∞ –±—É–¥–µ–º –≥–æ—Ç–æ–≤—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –í–°–ï 6 –º–µ—Å—è—Ü–µ–≤ –º–∏–Ω—É—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**

| Timeframe | –ò—Å—Ç–æ—Ä–∏—è | –°–≤–µ—á–µ–π | RAM Peak |
|-----------|---------|--------|----------|
| 5m | 6 –º–µ—Å—è—Ü–µ–≤ | ~52,000/—Å–∏–º–≤–æ–ª | ~2-3GB |
| 15m | 6 –º–µ—Å—è—Ü–µ–≤ | ~17,000/—Å–∏–º–≤–æ–ª | ~1GB |

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è 6GB –º–∞—à–∏–Ω—ã:**
1. Backfill –ø–æ —Å–∏–º–≤–æ–ª–∞–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–Ω–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!)
2. –ë–∞—Ç—á–∏–Ω–≥ –ø–æ –Ω–µ–¥–µ–ª—è–º (–Ω–µ –ø–æ –º–µ—Å—è—Ü–∞–º)
3. `asyncio.sleep(0.5)` –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ RAM —á–µ—Ä–µ–∑ `htop`

**–ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ RAM:**
- –£–º–µ–Ω—å—à–∏—Ç—å –±–∞—Ç—á –¥–æ 3 –¥–Ω–µ–π –≤–º–µ—Å—Ç–æ 7
- –ó–∞–ø—É—Å–∫–∞—Ç—å backfill –Ω–æ—á—å—é (–∫–æ–≥–¥–∞ trading engine –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è –æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞

**–ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö (MVP –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ):**
- ‚úÖ Win Rate >55% —Å—Ç–∞–±–∏–ª—å–Ω–æ 4+ –Ω–µ–¥–µ–ª–∏ –ø–æ–¥—Ä—è–¥
- ‚úÖ Sharpe Ratio >1.3
- ‚úÖ Max Drawdown <15%

**–ö–æ–≥–¥–∞ –°–†–û–ß–ù–û –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∏—Å—Ç–æ—Ä–∏–∏:**
- ‚ùå Win Rate <50% –≤ –Ω–æ–≤–æ–º –º–µ—Å—è—Ü–µ (–ø—Ä–æ–≤–∞–ª)
- ‚ùå Sharpe Ratio <0.8 (—Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å)
- ‚ùå Model predictions heavily biased (—Ç–æ–ª—å–∫–æ –ª–æ–Ω–≥–∏ –∏–ª–∏ —Ç–æ–ª—å–∫–æ —à–æ—Ä—Ç—ã)

---

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–ª—å –¥–ª—è Production ML

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç:**
- **–í—Ä–µ–º–µ–Ω–Ω–æ–π –æ—Ö–≤–∞—Ç:** 6+ –º–µ—Å—è—Ü–µ–≤ –º–∏–Ω—É—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Market regimes:** –ú–∏–Ω–∏–º—É–º 2 –º–µ—Å—è—Ü–∞ Bull + 2 –º–µ—Å—è—Ü–∞ Bear + 1 –º–µ—Å—è—Ü Sideways
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** Train –Ω–∞ 4 –º–µ—Å—è—Ü–∞—Ö, test –Ω–∞ 2 –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è
- **Continuous update:** –ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é –Ω–µ–¥–µ–ª—é, —É–¥–∞–ª—è—Ç—å —Å–∞–º—É—é —Å—Ç–∞—Ä—É—é (rolling window)

**–ü—Ä–∏–∑–Ω–∞–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω:**
```python
if all([
    win_rate_last_3_months > 0.55,
    sharpe_ratio > 1.5,
    max_drawdown < 0.12,
    model_tested_on_unseen_regime == True
]):
    print("üöÄ READY FOR LIVE TRADING")
else:
    print("‚è≥ Keep collecting data & training")
```

---

## üìå Quick Reference: –ö–æ–º–∞–Ω–¥—ã –¥–ª—è backfill

```bash
# PHASE 1 (—Ç–µ–∫—É—â–∞—è) - –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
python candle_materializer.py

# PHASE 2 - –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π backfill (–¥–æ–±–∞–≤–∏—Ç—å –≤ cron)
# –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç: incremental_backfill.py
# 0 3 * * * cd /path/to/project && python incremental_backfill.py

# PHASE 3 - continuous training (–¥–æ–±–∞–≤–∏—Ç—å –≤ cron)  
# 0 0 * * 0 cd /path/to/project && python train_sniper_entry_model.py
```

---

## üî¨ –ò—Å—Ç–æ—á–Ω–∏–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–ê–≤—Ç–æ—Ä:** Gemini AI (Google DeepMind)  
**–î–∞—Ç–∞:** 25 –¥–µ–∫–∞–±—Ä—è 2024  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–∞ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è ML –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ (1 –º–µ—Å—è—Ü –º–∏–Ω—É—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

**–ö–ª—é—á–µ–≤–æ–π –∏–Ω—Å–∞–π—Ç:**
> "–î–ª—è —Å—Ç–∞—Ä—Ç–∞ —ç—Ç–æ–≥–æ —Ö–≤–∞—Ç–∏—Ç. –í –±—É–¥—É—â–µ–º, –∫–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ, 
> –∑–∞–ø—É—Å—Ç–∏—Ç—å backfill —Å—Ç–∞—Ä—ã—Ö –º–µ—Å—è—Ü–µ–≤ –ø–æ –æ–¥–Ω–æ–π –Ω–µ–¥–µ–ª–µ, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –Ω–∞–ø–æ–ª–Ω—è—è –±–∞–∑—É, 
> –Ω–µ —É–±–∏–≤–∞—è —Å–µ—Ä–≤–µ—Ä."

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024-12-25  
**–°—Ç–∞—Ç—É—Å:** Phase 1 (MVP) - –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
